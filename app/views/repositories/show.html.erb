<script src="/vendor/highcharts.min.js"></script>

<h1><%= @repository.name %></h1>

<p>Status: <%= @repository.status %></p>

<% if @repository.status == "importing" %>
  <p>Progress: <%= (import_progress(@repository) * 100).round %>%</p>
<% end %>

<% if @repository.status == "imported" %>
  <p>LOC: <%= @current_loc %></p>

  <h2>Lines of code: Language distribution</h2>
  <div id="chart-implementation"></div>
  <script>
    Highcharts.chart('chart-implementation', {
      chart: {
        zoomType: 'x'
      },
      title: {
        text: null
      },
      subtitle: {
        text: null
      },
      xAxis: {
        type: 'datetime'
      },
      yAxis: {
        title: {
          text: 'Lines of code'
        }
      },
      legend: {
        enabled: true
      },
      series: <%=raw highchart_series(@language_distribution, @frequency) %>
    })
  </script>
<% end %>

<%= link_to "Back to repositories list", repositories_path %>
